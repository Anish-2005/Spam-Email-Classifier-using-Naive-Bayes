# Render service configuration for Docker deployment
version: 0.8
services:
  - type: web
    name: Spam-Email-Classifier-backend
    env: python
    branch: main
    plan: free
    pythonVersion: 3.10
    buildCommand: "pip install --upgrade pip setuptools wheel && pip install -r backend/requirements.txt"
    startCommand: gunicorn -k uvicorn.workers.UvicornWorker app:app --bind 0.0.0.0:$PORT --workers 4 --timeout 120
    envVars:
      - key: MODEL_PATH
        value: ./models/model_with_sms_norm.joblib
      - key: ALLOWED_ORIGINS
        value: '*'
  - type: web
    name: Spam-Email-Classifier-frontend
    env: docker
    branch: main
    plan: free
    dockerfilePath: frontend/Dockerfile
    buildCommand: ""
    startCommand: ""
    envVars:
      - key: BACKEND_URL
        # Render will route to backend service; replace with your backend URL if known
        value: 'https://Spam-Email-Classifier-backend.onrender.com'
      - key: PORT
        value: '3000'
